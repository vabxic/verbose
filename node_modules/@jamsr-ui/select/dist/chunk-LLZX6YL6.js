"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }"use client"
var _chunkFNV6KZ3Yjs = require('./chunk-FNV6KZ3Y.js');var _react = require('@floating-ui/react');var _config = require('@jamsr-ui/config');var _hooks = require('@jamsr-ui/hooks');var _utils = require('@jamsr-ui/utils');var _react3 = require('react');var yt=j=>{let{select:k={},globalConfig:B}=_config.useUIConfig.call(void 0, ),S=j,z=_utils.mergeGlobalProps.call(void 0, k,S),K=_utils.deepMergeProps.call(void 0, z,S,B),[q,V]=_utils.mapPropsVariants.call(void 0, K,_chunkFNV6KZ3Yjs.b.variantKeys),{label:J,children:y,onValueChange:Q,defaultValue:X,value:Y,placeholder:Z="Select",className:R,classNames:t,onOpenChange:_,defaultOpen:ee,open:te,isMultiple:a=!1,helperText:oe,renderValue:g,placement:I="bottom-start",startContent:se,endContent:re,as:ae,isDisabled:ne=!1,returnFocus:le=!0,isFormControl:pe=!1,disableTypeahead:x=!1,onUncontrolledValueChange:M,topContent:ce,bottomContent:ie,errorMessage:de,...ue}=q,me=_nullishCoalesce(ae, () => ("div")),[r=[],i]=_hooks.useControlledState.call(void 0, X,Y,Q),[d,P]=_hooks.useControlledState.call(void 0, ee,te,_),T=_react3.useId.call(void 0, ),G=_react3.useRef.call(void 0, null),{isDisabled:n,ref:ge}=_hooks.useIsDisabled.call(void 0, {isDisabled:ne,isFormControl:pe}),{isHovered:Pe,ref:fe}=_hooks.useHover.call(void 0, {isDisabled:n}),w=_react3.Children.toArray(y).map(e=>_react3.isValidElement.call(void 0, e)?{value:e.props.value,children:e.props.children,label:e.props.label}:null),A=_react3.useMemo.call(void 0, ()=>{let e=w.filter(s=>s&&new Set(r).has(s.value)).map(s=>_nullishCoalesce(_optionalChain([s, 'optionalAccess', _2 => _2.label]), () => ((typeof _optionalChain([s, 'optionalAccess', _3 => _3.children])=="string"?s.children:_nullishCoalesce(_optionalChain([s, 'optionalAccess', _4 => _4.value]), () => (""))))));return new Set(e)},[w,r]),[u,D]=_react3.useState.call(void 0, null),[m,be]=_react3.useState.call(void 0, null),E=_react3.useRef.call(void 0, []),L=_react3.useRef.call(void 0, []),o=_chunkFNV6KZ3Yjs.b.call(void 0, {...V,className:R}),{refs:{setReference:he,setFloating:ve},floatingStyles:Ce,context:l}=_react.useFloating.call(void 0, {placement:I,open:d,onOpenChange:P,whileElementsMounted:_react.autoUpdate,middleware:[_react.offset.call(void 0, 2),_react.flip.call(void 0, {crossAxis:I.includes("-"),padding:0}),_react.size.call(void 0, {apply({rects:e,elements:s,availableHeight:b}){Object.assign(s.floating.style,{height:`${e.floating.height}px`,maxHeight:`${Math.max(50,Math.min(e.floating.height,400,b))}px`,width:`${e.reference.width}px`})},padding:0})]}),Ne=_hooks.useMergeRefs.call(void 0, [fe,ge,he]),f=_react3.useCallback.call(void 0, e=>{be(e),e!==null&&(a||P(!1))},[a,P]);function Se(e){d?D(e):f(e)}let Ve=_react.useListNavigation.call(void 0, l,{listRef:E,activeIndex:u,selectedIndex:m,onNavigate:D,loop:!0,virtual:x===!0}),ye=_react.useTypeahead.call(void 0, l,{listRef:L,activeIndex:u,selectedIndex:m,onMatch:Se,enabled:!x}),Re=_react.useClick.call(void 0, l),Ie=_react.useDismiss.call(void 0, l,{outsidePress:e=>{let s=e.target;return!(_optionalChain([G, 'access', _5 => _5.current, 'optionalAccess', _6 => _6.contains, 'call', _7 => _7(s)])&&_optionalChain([s, 'optionalAccess', _8 => _8.dataset, 'access', _9 => _9.slot])==="label")}}),xe=_react.useRole.call(void 0, l,{role:"listbox"}),{getReferenceProps:Me,getFloatingProps:Te,getItemProps:U}=_react.useInteractions.call(void 0, [Ve,ye,Re,Ie,xe]),O=_react3.useCallback.call(void 0, e=>{let s=r,F=(()=>{if(!a)return[e];let c=new Set(s);return c.has(e)?(c.delete(e),[...c]):(c.add(e),[...c])})();_optionalChain([M, 'optionalCall', _10 => _10(F)]),i(F)},[a,M,i,r]),Ge=_react3.useMemo.call(void 0, ()=>({activeIndex:u,selectedIndex:m,getItemProps:U,handleSelect:f,setValue:i,isMultiple:a,value:r,styles:o,classNames:t,onSelectValue:O}),[u,t,U,f,a,O,m,i,o,r]),we=r.length>0,Ae=_react3.useMemo.call(void 0, ()=>g?g(Array.from(r)):Array.from(A).join(","),[g,A,r]),De=_react3.useCallback.call(void 0, e=>{e.preventDefault()},[]);return{Component:me,returnFocus:le,context:l,elementsRef:E,labelsRef:L,isOpen:d,hasValue:we,label:J,placeholder:Z,helperText:oe,children:y,getRenderValue:Ae,getBaseProps:e=>({"data-component":"select","data-slot":"base","data-open":_utils.dataAttr.call(void 0, d),"data-hovered":_utils.dataAttr.call(void 0, Pe),"data-disabled":_utils.dataAttr.call(void 0, n),"aria-disabled":_utils.dataAttr.call(void 0, n),...e,className:o.base({className:_utils.cn.call(void 0, _optionalChain([t, 'optionalAccess', _11 => _11.base]),R)}),ref:G,...ue}),getLabelProps:e=>({"data-slot":"label",className:o.label({className:_optionalChain([t, 'optionalAccess', _12 => _12.label])}),htmlFor:T,..._utils.formLabelProps.call(void 0, ),...e}),getMainWrapperProps:e=>({"data-slot":"main-wrapper",className:o.mainWrapper({className:_optionalChain([t, 'optionalAccess', _13 => _13.mainWrapper])}),...e}),getInnerWrapperProps:e=>({"data-slot":"inner-wrapper",className:o.innerWrapper({className:_optionalChain([t, 'optionalAccess', _14 => _14.innerWrapper])}),...e}),getTriggerProps:e=>({"data-slot":"trigger",type:"button",id:T,className:o.trigger({className:_utils.cn.call(void 0, _optionalChain([t, 'optionalAccess', _15 => _15.trigger]),{"h-auto":a})}),disabled:n,"aria-disabled":_utils.dataAttr.call(void 0, n),"data-disabled":_utils.dataAttr.call(void 0, n),...e,...Me({ref:Ne})}),getValueProps:e=>({"data-slot":"value",className:o.value({className:_optionalChain([t, 'optionalAccess', _16 => _16.value])}),...e}),getPlaceholderProps:e=>({"data-slot":"placeholder",className:o.placeholder({className:_optionalChain([t, 'optionalAccess', _17 => _17.placeholder])}),...e}),getPopoverProps:e=>({"data-slot":"popover",ref:ve,style:Ce,className:o.popover({className:_optionalChain([t, 'optionalAccess', _18 => _18.popover])}),...Te(),...e}),getContentProps:e=>({"data-slot":"content",className:o.content({className:_optionalChain([t, 'optionalAccess', _19 => _19.content])}),onMouseDown:De,...e}),getHelperTextProps:e=>({"data-slot":"helper-text",className:o.helperText({className:_optionalChain([t, 'optionalAccess', _20 => _20.helperText])}),...e}),getStartContentProps:e=>({"data-slot":"start-content",className:o.startContent({className:_optionalChain([t, 'optionalAccess', _21 => _21.startContent])}),...e}),getEndContentProps:e=>({"data-slot":"end-content",className:o.endContent({className:_optionalChain([t, 'optionalAccess', _22 => _22.endContent])}),...e}),getIndicatorProps:e=>({"data-slot":"indicator",className:o.indicator({className:_optionalChain([t, 'optionalAccess', _23 => _23.indicator])}),...e}),getScrollAreaProps:e=>({"data-slot":"scroll-area",className:o.scrollArea({className:_optionalChain([t, 'optionalAccess', _24 => _24.scrollArea])}),...e}),contextValue:Ge,startContent:se,endContent:re,topContent:ce,bottomContent:ie,getErrorMessageProps:e=>({"data-slot":"error-message",className:o.errorMessage({className:_optionalChain([t, 'optionalAccess', _25 => _25.errorMessage])}),...e}),isInvalid:V.isInvalid,errorMessage:de}};exports.a = yt;
