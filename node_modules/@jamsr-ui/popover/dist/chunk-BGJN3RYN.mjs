"use client"
import{a as t}from"./chunk-GHEAJWIL.mjs";import{FloatingArrow as K,FloatingFocusManager as X,FloatingOverlay as j,FloatingPortal as q,arrow as B,autoUpdate as L,flip as Q,offset as W,safePolygon as Y,shift as Z,size as ee,useClick as oe,useDismiss as se,useFloating as te,useHover as re,useInteractions as ne,useRole as ae}from"@floating-ui/react";import{useControlledState as le}from"@jamsr-ui/hooks";import{useUIConfig as ie}from"@jamsr-ui/config";import{cn as ce,deepMergeProps as pe,mapPropsVariants as ge,mergeGlobalProps as me}from"@jamsr-ui/utils";import{cloneElement as fe,useRef as de}from"react";import{Fragment as ue,jsx as o,jsxs as m}from"react/jsx-runtime";var Oe=f=>{let{popover:d={},globalConfig:u}=ie(),r=f,P=me(d,r),b=pe(P,r,u),[v,h]=ge(b,t.variantKeys),{trigger:n,children:y,isOpen:F,onOpenChange:O,initialOpen:w=!1,isModal:k=!0,enabled:C=!0,placement:a="top",triggerOn:s="click",showArrow:l=!1,className:S,offset:x=4,classNames:i,lockScroll:N=!0,...R}=v,[c,M]=le(w,F,O),p=de(null),{refs:A,floatingStyles:E,context:e}=te({placement:a,open:c,onOpenChange:M,middleware:[W(x),Q({crossAxis:a.includes("-"),fallbackAxisSideDirection:"end",padding:4}),Z({padding:4}),l?B({element:p}):void 0,ee({apply({rects:$,elements:G,availableHeight:J}){}})],whileElementsMounted:L}),V=oe(e,{enabled:s==="click"}),z=se(e),D=ae(e),H=re(e,{enabled:s==="hover",handleClose:Y({blockPointerEvents:!0})}),{getReferenceProps:I,getFloatingProps:T}=ne([V,z,D,H]),U=e.refs.setReference,_=fe(n,I({ref:U,...R})),g=t(h);return C?m(ue,{children:[_,c&&o(q,{children:o(j,{className:"z-backdrop",lockScroll:N,children:o(X,{context:e,modal:k,returnFocus:s==="click",initialFocus:-1,children:m("div",{"data-component":"popover",className:g.base({className:ce(S,i?.base)}),ref:A.setFloating,style:E,...T(),children:[l&&o(K,{ref:p,context:e,className:g.arrow({className:i?.arrow})}),y]})})})})]}):n};export{Oe as a};
