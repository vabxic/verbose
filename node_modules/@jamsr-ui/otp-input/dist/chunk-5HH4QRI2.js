"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }"use client"
var _chunkLY6MH56Rjs = require('./chunk-LY6MH56R.js');var _hooks = require('@jamsr-ui/hooks');var _config = require('@jamsr-ui/config');var _utils = require('@jamsr-ui/utils');var _react = require('react');var _jsxruntime = require('react/jsx-runtime');var he=P=>{let{otpInput:w={},globalConfig:L}=_config.useUIConfig.call(void 0, ),v=P,H=_utils.mergeGlobalProps.call(void 0, w,v),R=_utils.deepMergeProps.call(void 0, H,v,L),[O,k]=_utils.mapPropsVariants.call(void 0, R,_chunkLY6MH56Rjs.b.variantKeys),{numberOfDigits:s=4,value:A,onValueChange:F,className:S,placeholder:B,autoFocus:I,defaultValue:K,inputProps:U,isNumeric:W=!0,helperText:h,label:T,onBlur:_,classNames:l,disabled:$=!1,isDisabled:G=!1,onComplete:C,isFormControl:j=!1}=O,{isDisabled:u,ref:q}=_hooks.useIsDisabled.call(void 0, {isDisabled:G||$,isFormControl:j}),[i="",N]=_hooks.useControlledState.call(void 0, K,A,F),z=_react.useMemo.call(void 0, ()=>{let e=i.split("");for(let t=0;t<s;t++){let a=e[t];a?a&&(e[t]=a.trim()):e[t]=""}return e},[s,i]),n=_react.useRef.call(void 0, []);_react.useEffect.call(void 0, ()=>{n.current=n.current.slice(0,s)},[s]),_react.useEffect.call(void 0, ()=>{I&&_optionalChain([n, 'access', _2 => _2.current, 'access', _3 => _3[0], 'optionalAccess', _4 => _4.focus, 'call', _5 => _5()])},[I]);let D=_react.useCallback.call(void 0, e=>{e.trim().length===s&&(_optionalChain([C, 'optionalCall', _6 => _6(e)]),n.current.forEach(t=>_optionalChain([t, 'optionalAccess', _7 => _7.blur, 'call', _8 => _8()])))},[s,C]),V=W,d=_react.useCallback.call(void 0, e=>V?/^[0-9]*$/.test(e):typeof e=="string",[V]),J=_react.useCallback.call(void 0, e=>d(e)&&e.length===1,[d]),r=e=>{_optionalChain([n, 'access', _9 => _9.current, 'access', _10 => _10[e], 'optionalAccess', _11 => _11.focus, 'call', _12 => _12()])},b=(e,t)=>{let a=[...i];a[e]=t||" ";let p=a.join("");N(p),D(p)},Q=(e,t)=>{let{value:a}=e.target;J(a)&&(b(t,a),r(t+1))},X=(e,t)=>{let{key:a}=e,p=e.target,te=p.value;if(a===i[t]){e.preventDefault(),r(t+1);return}switch(a){case"Delete":case"Backspace":te===""?(b(t-1,""),r(t-1)):b(t,"");break;case"ArrowRight":case"ArrowUp":e.preventDefault(),r(t+1);break;case"ArrowLeft":case"ArrowDown":e.preventDefault(),r(t-1);break;default:p.setSelectionRange(0,p.value.length);break}},y=_hooks.useMergeRefs.call(void 0, [q]),Y=_react.useCallback.call(void 0, (e,t)=>{e&&(n.current[t]=e,_optionalChain([y, 'optionalCall', _13 => _13(e)]))},[y]),Z=e=>{e.preventDefault();let t=_optionalChain([e, 'access', _14 => _14.clipboardData, 'optionalAccess', _15 => _15.getData, 'call', _16 => _16("text/plain"), 'access', _17 => _17.trim, 'call', _18 => _18()]);if(!t||!d(t))return;let a=t.slice(0,s);N(a),D(a)},x=(e,t)=>{_optionalChain([n, 'access', _19 => _19.current, 'access', _20 => _20[t-1], 'optionalAccess', _21 => _21.value])||r(t-1),e.target.setSelectionRange(0,e.target.value.length)},o=_chunkLY6MH56Rjs.b.call(void 0, k),ee=_react.useId.call(void 0, );return _jsxruntime.jsxs.call(void 0, "div",{"data-component":"otp-input","data-disabled":_utils.dataAttr.call(void 0, u),"aria-disabled":_utils.dataAttr.call(void 0, u),"data-slot":"base",className:_optionalChain([o, 'optionalAccess', _22 => _22.base, 'call', _23 => _23({className:_utils.cn.call(void 0, _optionalChain([l, 'optionalAccess', _24 => _24.base]),S)})]),onBlur:_,children:[_jsxruntime.jsxs.call(void 0, "div",{"data-slot":"wrapper",className:o.wrapper({className:_optionalChain([l, 'optionalAccess', _25 => _25.wrapper])}),children:[T&&_jsxruntime.jsx.call(void 0, "label",{htmlFor:ee,className:_optionalChain([o, 'optionalAccess', _26 => _26.label, 'call', _27 => _27({className:_optionalChain([l, 'optionalAccess', _28 => _28.label])})]),"data-slot":"label",children:T}),_jsxruntime.jsx.call(void 0, "div",{"data-slot":"inputs-wrapper",className:o.inputsWrapper({className:_optionalChain([l, 'optionalAccess', _29 => _29.inputsWrapper])}),children:z.map((e,t)=>_react.createElement.call(void 0, "input",{"data-disabled":_utils.dataAttr.call(void 0, u),"aria-disabled":_utils.dataAttr.call(void 0, u),disabled:u,...U,placeholder:B,key:t,className:_optionalChain([o, 'optionalAccess', _30 => _30.input, 'call', _31 => _31({className:_optionalChain([l, 'optionalAccess', _32 => _32.input])})]),inputMode:"numeric",autoComplete:"one-time-code",pattern:"\\d{1}",maxLength:s,ref:a=>Y(a,t),value:e,onChange:a=>Q(a,t),onKeyDown:a=>X(a,t),onPaste:Z,onFocus:a=>x(a,t)}))})]}),h&&_jsxruntime.jsx.call(void 0, "div",{className:_optionalChain([o, 'optionalAccess', _33 => _33.helperText, 'call', _34 => _34({className:_optionalChain([l, 'optionalAccess', _35 => _35.helperText])})]),"data-slot":"helper-text",children:h})]})};exports.a = he;
