"use client"
import{b as f}from"./chunk-44UW7ZIQ.mjs";import{useControlledState as ae,useIsDisabled as se,useMergeRefs as ne}from"@jamsr-ui/hooks";import{useUIConfig as le}from"@jamsr-ui/config";import{cn as re,dataAttr as c,deepMergeProps as oe,mapPropsVariants as pe,mergeGlobalProps as ue}from"@jamsr-ui/utils";import{useCallback as m,useEffect as M,useId as ie,useMemo as ce,useRef as me}from"react";import{jsx as g,jsxs as E}from"react/jsx-runtime";import{createElement as de}from"react";var he=P=>{let{otpInput:w={},globalConfig:L}=le(),v=P,H=ue(w,v),R=oe(H,v,L),[O,k]=pe(R,f.variantKeys),{numberOfDigits:s=4,value:A,onValueChange:F,className:S,placeholder:B,autoFocus:I,defaultValue:K,inputProps:U,isNumeric:W=!0,helperText:h,label:T,onBlur:_,classNames:l,disabled:$=!1,isDisabled:G=!1,onComplete:C,isFormControl:j=!1}=O,{isDisabled:u,ref:q}=se({isDisabled:G||$,isFormControl:j}),[i="",N]=ae(K,A,F),z=ce(()=>{let e=i.split("");for(let t=0;t<s;t++){let a=e[t];a?a&&(e[t]=a.trim()):e[t]=""}return e},[s,i]),n=me([]);M(()=>{n.current=n.current.slice(0,s)},[s]),M(()=>{I&&n.current[0]?.focus()},[I]);let D=m(e=>{e.trim().length===s&&(C?.(e),n.current.forEach(t=>t?.blur()))},[s,C]),V=W,d=m(e=>V?/^[0-9]*$/.test(e):typeof e=="string",[V]),J=m(e=>d(e)&&e.length===1,[d]),r=e=>{n.current[e]?.focus()},b=(e,t)=>{let a=[...i];a[e]=t||" ";let p=a.join("");N(p),D(p)},Q=(e,t)=>{let{value:a}=e.target;J(a)&&(b(t,a),r(t+1))},X=(e,t)=>{let{key:a}=e,p=e.target,te=p.value;if(a===i[t]){e.preventDefault(),r(t+1);return}switch(a){case"Delete":case"Backspace":te===""?(b(t-1,""),r(t-1)):b(t,"");break;case"ArrowRight":case"ArrowUp":e.preventDefault(),r(t+1);break;case"ArrowLeft":case"ArrowDown":e.preventDefault(),r(t-1);break;default:p.setSelectionRange(0,p.value.length);break}},y=ne([q]),Y=m((e,t)=>{e&&(n.current[t]=e,y?.(e))},[y]),Z=e=>{e.preventDefault();let t=e.clipboardData?.getData("text/plain").trim();if(!t||!d(t))return;let a=t.slice(0,s);N(a),D(a)},x=(e,t)=>{n.current[t-1]?.value||r(t-1),e.target.setSelectionRange(0,e.target.value.length)},o=f(k),ee=ie();return E("div",{"data-component":"otp-input","data-disabled":c(u),"aria-disabled":c(u),"data-slot":"base",className:o?.base({className:re(l?.base,S)}),onBlur:_,children:[E("div",{"data-slot":"wrapper",className:o.wrapper({className:l?.wrapper}),children:[T&&g("label",{htmlFor:ee,className:o?.label({className:l?.label}),"data-slot":"label",children:T}),g("div",{"data-slot":"inputs-wrapper",className:o.inputsWrapper({className:l?.inputsWrapper}),children:z.map((e,t)=>de("input",{"data-disabled":c(u),"aria-disabled":c(u),disabled:u,...U,placeholder:B,key:t,className:o?.input({className:l?.input}),inputMode:"numeric",autoComplete:"one-time-code",pattern:"\\d{1}",maxLength:s,ref:a=>Y(a,t),value:e,onChange:a=>Q(a,t),onKeyDown:a=>X(a,t),onPaste:Z,onFocus:a=>x(a,t)}))})]}),h&&g("div",{className:o?.helperText({className:l?.helperText}),"data-slot":"helper-text",children:h})]})};export{he as a};
